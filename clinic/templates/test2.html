<!DOCTYPE html>
<html>

<head>
    <script src="https://cdn.tailwindcss.com"></script>

    <style>
        /* Replace primary/secondary with specific colors */
        .bg-blue-500 {
            background-color: #0056b3;
        }

        .text-white {
            color: #f8fafc;
        }

        .bg-gray-200 {
            background-color: #e2e8f0;
        }

        .text-gray-800 {
            color: #1e293b;
        }

        .bg-gray-100 {
            background-color: #f1f5f9;
        }

        .text-gray-600 {
            color: #64748b;
        }

        .border-gray-300 {
            border-color: #e2e8f0;
        }

        /* Calendar styles remain the same but with updated colors */
        .calendar-container .flatpickr-calendar {
            box-shadow: none;
            border: 1px solid #e2e8f0;
            border-radius: 0.5rem;
            width: 100%;
        }

        .calendar-container .flatpickr-day.selected {
            background: #0056b3;
            border-color: #0056b3;
        }

        .calendar-container .flatpickr-day.today {
            border-color: #0056b3;
        }

        .calendar-container .flatpickr-day:hover {
            background: #e2e8f0;
        }

        .calendar-container .flatpickr-day.flatpickr-disabled {
            color: #cbd5e1;
        }
    </style>
</head>

<body class="min-h-screen bg-gradient-to-b from-blue-50 to-white">
    <div class="container max-w-6xl px-4 py-8 mx-auto">
        <!-- Header remains the same -->
        <header class="mb-8 text-center">
            <h1 class="text-3xl font-bold text-blue-500 md:text-4xl">
                MediCare Clinic
            </h1>
            <p class="mt-2 text-gray-600">
                Book your appointment with our experienced doctors
            </p>
        </header>

        <div class="mb-8">
            <div class="flex justify-between mb-4">
                <h2 class="text-2xl font-semibold">Book an Appointment</h2>
                <div class="flex items-center gap-2 text-sm text-gray-600">
                    <div id="step-1-indicator"
                        class="step-indicator cursor-pointer flex items-center justify-center w-8 h-8 rounded-full bg-blue-500 text-white">
                        1</div>
                    <div id="step-1-2-line" class="w-8 h-1 bg-gray-200"></div>
                    <div id="step-2-indicator"
                        class="step-indicator cursor-pointer flex items-center justify-center w-8 h-8 rounded-full bg-gray-200">
                        2</div>
                    <div id="step-2-3-line" class="w-8 h-1 bg-gray-200"></div>
                    <div id="step-3-indicator"
                        class="step-indicator cursor-pointer flex items-center justify-center w-8 h-8 rounded-full bg-gray-200">
                        3</div>
                    <div id="step-3-4-line" class="w-8 h-1 bg-gray-200"></div>
                    <div id="step-4-indicator"
                        class="step-indicator cursor-pointer flex items-center justify-center w-8 h-8 rounded-full bg-gray-200">
                        4</div>
                </div>
            </div>

            <div class="border-none shadow-lg rounded-lg bg-white">
                <div class="p-6">
                    <!-- Step 1: Select a Doctor -->
                    <div id="step-1" class="space-y-6">
                        <h3 class="mb-4 text-xl font-medium">Select a Doctor</h3>
                        <div class="mb-4">
                            <div class="inline-flex h-10 items-center justify-center rounded-lg bg-gray-100 p-1">
                                <button type="button"
                                    class="tab-button active px-3 py-1.5 text-sm font-medium rounded-md bg-white shadow-sm"
                                    data-tab="all">All Doctors</button>
                                <button type="button" class="tab-button px-3 py-1.5 text-sm font-medium rounded-md"
                                    data-tab="general">General</button>
                                <button type="button" class="tab-button px-3 py-1.5 text-sm font-medium rounded-md"
                                    data-tab="cardiology">Cardiology</button>
                                <button type="button" class="tab-button px-3 py-1.5 text-sm font-medium rounded-md"
                                    data-tab="neurology">Neurology</button>
                                <button type="button" class="tab-button px-3 py-1.5 text-sm font-medium rounded-md"
                                    data-tab="pediatrics">Pediatrics</button>
                            </div>
                        </div>
                        <div id="doctor-tabs" class="space-y-4">
                            <div class="tab-content" id="all-tab">
                                <div id="all-doctors" class="grid gap-4 md:grid-cols-2 lg:grid-cols-3"></div>
                            </div>
                            <div class="tab-content hidden" id="general-tab">
                                <div id="general-doctors" class="grid gap-4 md:grid-cols-2 lg:grid-cols-3"></div>
                            </div>
                            <div class="tab-content hidden" id="cardiology-tab">
                                <div id="cardiology-doctors" class="grid gap-4 md:grid-cols-2 lg:grid-cols-3"></div>
                            </div>
                            <div class="tab-content hidden" id="neurology-tab">
                                <div id="neurology-doctors" class="grid gap-4 md:grid-cols-2 lg:grid-cols-3"></div>
                            </div>
                            <div class="tab-content hidden" id="pediatrics-tab">
                                <div id="pediatrics-doctors" class="grid gap-4 md:grid-cols-2 lg:grid-cols-3"></div>
                            </div>
                        </div>
                    </div>

                    <!-- Other steps remain structurally similar but with updated colors -->
                    <!-- Step 2 -->
                    <div id="step-2" class="space-y-6 hidden">
                        <h3 class="mb-4 text-xl font-medium">Select Date & Appointment Type</h3>
                        <div class="grid gap-6 md:grid-cols-2">
                            <div>
                                <p class="mb-2 font-medium">Choose a date</p>
                                <div id="calendar" class="calendar-container border border-gray-300 rounded-md p-4">
                                </div>
                            </div>
                            <!-- Appointment type section remains same -->
                        </div>
                    </div>

                    <!-- Step 3 -->
                    <div id="step-3" class="space-y-6 hidden">
                        <h3 class="mb-4 text-xl font-medium">Select Time Slot</h3>
                        <p class="mb-4 text-gray-600" id="selected-date-display">Available time slots for the selected
                            date</p>
                        <div id="time-slots" class="grid grid-cols-2 gap-3 sm:grid-cols-3 md:grid-cols-4"></div>
                    </div>

                    <!-- Step 4 remains similar but with color updates -->
                    <div id="step-4" class="space-y-6 hidden">
                        <!-- Form fields and summary with updated colors -->
                        <div id="booking-summary" class="p-4 mt-6 border border-gray-300 rounded-lg bg-gray-100">
                            <!-- Summary content -->
                        </div>
                    </div>

                    <div class="flex justify-between mt-8">
                        <button id="back-button"
                            class="inline-flex items-center justify-center rounded-md text-sm font-medium border border-gray-300 bg-white hover:bg-gray-100 text-gray-800 h-10 px-4 py-2 hidden">
                            Back
                        </button>
                        <div></div>
                        <button id="next-button"
                            class="inline-flex items-center justify-center rounded-md text-sm font-medium bg-blue-500 text-white hover:bg-blue-600 h-10 px-4 py-2">
                            Continue
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/flatpickr"></script>
    <script>
        // Sample JSON data (replace with your actual data source)
        const doctorData = {
            catogary: ["all", "general", "cardiology", "neurology", "pediatrics"],

            doctors: [
                {
                    id: "dr-smith",
                    name: "Dr. Emily Smith",
                    specialty: "General Medicine",
                    experience: 12,
                    rating: 4.9,
                    reviews: 124,
                    fees: 150,
                    image: "https://placehold.co/300x300",
                    availability: {
                        days: ["2025-03-07", "2025-03-08", "2025-03-10"],
                        times: ["09:00 AM", "10:00 AM", "11:00 AM", "02:00 PM", "03:00 PM"]
                    }
                },
                {
                    "id": "dr-smith",
                    "name": "Dr. Emily Smith",
                    "specialty": "General Medicine",
                    "experience": 12,
                    "rating": 4.9,
                    "reviews": 124,
                    "fees": 150,
                    "image": "https://placehold.co/300x300",
                    "availability": {
                        "days": ["2025-03-07", "2025-03-08", "2025-03-10"],
                        "times": ["09:00 AM", "10:00 AM", "11:00 AM", "02:00 PM", "03:00 PM"]
                    }
                },
                {
                    "id": "dr-johnson",
                    "name": "Dr. Michael Johnson",
                    "specialty": "Cardiology",
                    "experience": 15,
                    "rating": 4.8,
                    "reviews": 98,
                    "fees": 200,
                    "image": "https://placehold.co/300x300",
                    "availability": {
                        "days": ["2025-03-07", "2025-03-09", "2025-03-11"],
                        "times": ["09:30 AM", "10:30 AM", "11:30 AM", "02:30 PM", "03:30 PM"]
                    }
                }
            ]
            // Add more doctors as per the JSON example
        };

        document.addEventListener('DOMContentLoaded', function () {
            let currentStep = 1;
            let selectedDoctor = null;
            let selectedDate = null;
            let selectedTime = null;
            let appointmentType = 'consultation';

            // DOM elements
            const nextButton = document.getElementById('next-button');
            const backButton = document.getElementById('back-button');
            const stepIndicators = document.querySelectorAll('.step-indicator');

            // Function to generate doctor card
            function generateDoctorCard(doctor) {
                return `
                    <div class="doctor-card cursor-pointer transition-all hover:shadow-md border border-gray-300 rounded-lg"
                        data-id="${doctor.id}" 
                        data-name="${doctor.name}" 
                        data-specialty="${doctor.specialty}"
                        data-fees="${doctor.fees}">
                        <div class="p-4">
                            <div class="flex flex-col items-center text-center">
                                <div class="relative w-24 h-24 mb-4 overflow-hidden rounded-full">
                                    <img src="${doctor.image}" alt="${doctor.name}" class="object-cover w-full h-full">
                                </div>
                                <h4 class="mb-1 text-lg font-semibold">${doctor.name}</h4>
                                <span class="inline-flex items-center rounded-full border border-gray-300 px-2.5 py-0.5 text-xs font-semibold bg-gray-200 text-gray-800 mb-2">
                                    ${doctor.specialty}
                                </span>
                                <div class="flex items-center mb-2 space-x-1">
                                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="#eab308" stroke="#eab308" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-4 h-4">
                                        <polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"></polygon>
                                    </svg>
                                    <span class="text-sm font-medium">${doctor.rating}</span>
                                    <span class="text-sm text-gray-600">(${doctor.reviews} reviews)</span>
                                </div>
                                <p class="text-sm text-gray-600">${doctor.experience} years experience</p>
                                <div class="flex flex-wrap justify-center gap-1 mt-3">
                                    <span class="inline-flex items-center rounded-full border border-gray-300 px-2.5 py-0.5 text-xs font-semibold bg-gray-200 text-gray-800">
                                        Available Today
                                    </span>
                                    <span class="inline-flex items-center rounded-full border border-gray-300 px-2.5 py-0.5 text-xs font-semibold bg-gray-200 text-gray-800">
                                        Online Consult
                                    </span>
                                </div>
                            </div>
                        </div>
                    </div>
                `;
            }

            // Populate doctor tabs
            function populateDoctors() {
                const categories = {
                    'all': 'all-doctors',
                    'general': 'general-doctors',
                    'cardiology': 'cardiology-doctors',
                    'neurology': 'neurology-doctors',
                    'pediatrics': 'pediatrics-doctors'
                };

                Object.keys(categories).forEach(category => {
                    const container = document.getElementById(categories[category]);
                    container.innerHTML = '';
                    doctorData.doctors.forEach(doctor => {
                        if (category === 'all' || doctor.specialty.toLowerCase().includes(category)) {
                            container.innerHTML += generateDoctorCard(doctor);
                        }
                    });
                });

                // Add click events to newly created doctor cards
                document.querySelectorAll('.doctor-card').forEach(card => {
                    card.addEventListener('click', handleDoctorSelection);
                });
            }

            // Handle doctor selection
            function handleDoctorSelection(e) {
                const card = e.currentTarget;
                document.querySelectorAll('.doctor-card').forEach(c => {
                    c.classList.remove('border-2', 'border-blue-500', 'shadow-md');
                    c.classList.add('border', 'border-gray-300');
                });
                card.classList.remove('border', 'border-gray-300');
                card.classList.add('border-2', 'border-blue-500', 'shadow-md');

                selectedDoctor = {
                    id: card.dataset.id,
                    name: card.dataset.name,
                    specialty: card.dataset.specialty,
                    fees: card.dataset.fees
                };
                updateSummary();
                updateNextButtonState();
            }

            // Calendar initialization with dynamic dates
            const calendar = flatpickr("#calendar", {
                inline: true,
                minDate: "today",
                enable: [],
                onChange: function (selectedDates, dateStr) {
                    selectedDate = selectedDates[0];
                    updateTimeSlots();
                    updateSummary();
                    updateNextButtonState();
                }
            });

            // Update available dates based on selected doctor
            function updateCalendar() {
                if (selectedDoctor) {
                    const doctor = doctorData.doctors.find(d => d.id === selectedDoctor.id);
                    calendar.set('enable', doctor.availability.days);
                }
            }

            // Update time slots based on selected doctor and date
            function updateTimeSlots() {
                const container = document.getElementById('time-slots');
                container.innerHTML = '';
                if (selectedDoctor && selectedDate) {
                    const doctor = doctorData.doctors.find(d => d.id === selectedDoctor.id);
                    const dateStr = selectedDate.toISOString().split('T')[0];
                    if (doctor.availability.days.includes(dateStr)) {
                        doctor.availability.times.forEach(time => {
                            container.innerHTML += `
                                <button class="time-slot w-full px-4 py-2 border border-gray-300 rounded-md font-medium hover:border-blue-500" data-time="${time}">
                                    ${time}
                                </button>
                            `;
                        });
                    }
                    document.querySelectorAll('.time-slot').forEach(slot => {
                        slot.addEventListener('click', handleTimeSelection);
                    });
                }
            }

            // Handle time selection
            function handleTimeSelection(e) {
                const slot = e.currentTarget;
                document.querySelectorAll('.time-slot').forEach(s => {
                    s.classList.remove('bg-blue-500', 'text-white');
                });
                slot.classList.add('bg-blue-500', 'text-white');
                selectedTime = slot.dataset.time;
                updateSummary();
                updateNextButtonState();
            }

            // Update booking summary
            function updateSummary() {
                document.getElementById('summary-doctor-name').textContent = selectedDoctor?.name || 'Not selected';
                document.getElementById('summary-date').textContent = selectedDate?.toLocaleDateString('en-US', { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' }) || 'Not selected';
                document.getElementById('summary-time').textContent = selectedTime || 'Not selected';
                document.querySelector('.consultation-fee').textContent = selectedDoctor ? `$${selectedDoctor.fees}.00` : '$0.00';
            }

            // Step indicator click handling
            stepIndicators.forEach(indicator => {
                indicator.addEventListener('click', () => {
                    const step = parseInt(indicator.textContent);
                    if (canSwitchToStep(step)) {
                        switchStep(step);
                    }
                });
            });

            // Check if can switch to step
            function canSwitchToStep(step) {
                if (step === 1) return true;
                if (step === 2 && selectedDoctor) return true;
                if (step === 3 && selectedDoctor && selectedDate) return true;
                if (step === 4 && selectedDoctor && selectedDate && selectedTime) return true;
                return false;
            }

            // Switch steps
            function switchStep(step) {
                document.querySelectorAll('[id^="step-"]').forEach(stepDiv => {
                    stepDiv.classList.add('hidden');
                });
                document.getElementById(`step-${step}`).classList.remove('hidden');
                currentStep = step;
                updateProgressIndicators();
                backButton.classList.toggle('hidden', currentStep === 1);
                nextButton.textContent = currentStep === 4 ? 'Confirm Booking' : 'Continue';
                if (currentStep === 2) updateCalendar();
                if (currentStep === 3) updateTimeSlots();
            }

            // Navigation buttons
            nextButton.addEventListener('click', () => {
                if (currentStep < 4) {
                    switchStep(currentStep + 1);
                } else {
                    document.getElementById('confirmation-dialog').classList.remove('hidden');
                }
            });

            backButton.addEventListener('click', () => {
                if (currentStep > 1) {
                    switchStep(currentStep - 1);
                }
            });

            // Update progress indicators
            function updateProgressIndicators() {
                stepIndicators.forEach((indicator, index) => {
                    const stepNum = index + 1;
                    indicator.classList.toggle('bg-blue-500', stepNum <= currentStep);
                    indicator.classList.toggle('text-white', stepNum <= currentStep);
                    indicator.classList.toggle('bg-gray-200', stepNum > currentStep);
                    if (index < 3) {
                        const line = document.getElementById(`step-${index + 1}-${index + 2}-line`);
                        line.classList.toggle('bg-blue-500', stepNum < currentStep);
                        line.classList.toggle('bg-gray-200', stepNum >= currentStep);
                    }
                });
            }

            // Update next button state
            function updateNextButtonState() {
                let disabled = false;
                switch (currentStep) {
                    case 1: disabled = !selectedDoctor; break;
                    case 2: disabled = !selectedDate; break;
                    case 3: disabled = !selectedTime; break;
                    case 4: disabled = false; break;
                }
                nextButton.disabled = disabled;
                nextButton.classList.toggle('opacity-50', disabled);
                nextButton.classList.toggle('cursor-not-allowed', disabled);
            }

            // Initialize
            populateDoctors();
            updateNextButtonState();
        });
    </script>
</body>

</html>